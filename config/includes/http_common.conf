# Global HTTP-level TLS/session and compression settings

# Session resumption (applies to all servers)
ssl_session_cache shared:SSL:20m;
ssl_session_timeout 1h;
ssl_session_tickets off;

# WebSocket connection upgrade mapping (http{} scope)
map $http_upgrade $connection_upgrade {
default upgrade;
'' close;
}

# Compression for text assets
gzip on;
gzip_vary on;
gzip_min_length 1000;
gzip_proxied any;
gzip_types text/plain text/css text/xml application/xml application/javascript text/javascript application/json image/svg+xml;